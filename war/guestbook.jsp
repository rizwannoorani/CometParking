<html><head>       <script type="text/javascript" src="/_ah/channel/jsapi"></script></head><body><h2>Parking Lot Status changes:</h2><div id='content'>  log</div><div id='time'>  12:30PM</div><table style="width:300px" id='spotsTable'><tr>  <td>Spots Available</td>  <td>Status</td>		  </tr><tr>  <td>Spot 1</td>  <td id='1'>Available</td>		</tr><tr>  <td>Spot 2</td>  <td id='2'>Available</td>		</tr><tr>  <td>Spot 3</td>  <td id='3'>Available</td>		</tr><tr>  <td>Spot 4</td>  <td id='4'>Available</td>		</tr></table><script type='text/javascript'>    onMessage = function(m) {		newSpots = JSON.parse(m.data);		for(var i in newSpots){			var field = document.getElementById(i);			if(newSpots[i] == '1'){				field.innerHTML = "Occupied";			}else{				field.innerHTML = "Available";			}		}	var currentdate = new Date();      var dateText = document.getElementById('time');      dateText.innerHTML = currentdate.getHours() + ":" + currentdate.getMinutes();    }        updateDisplay = function(){      var msg = document.getElementById('content');      msg.innerHTML = String(m.data);      var currentdate = new Date();      var dateText = document.getElementById('time');      dateText.innerHTML = currentdate.getHours() + ":" + currentdate.getMinutes();    }    onOpened = function() {      var msg = document.getElementById('content');      msg.innerHTML = 'onOpened';      };    openChannel = function() {      var msg = document.getElementById('content');      msg.innerHTML = 'openChannel';        var token = '{{ token }}';        var channel = new goog.appengine.Channel(token);        var handler = {          'onopen': onOpened,          'onmessage': onMessage,          'onerror': function() {var msg = document.getElementById('content');            msg.style.background = "red";            msg.innerHTML = "onError";},          'onclose': function() {            var msg = document.getElementById('content');            msg.style.background = "green";            msg.innerHTML = "onclose";        }        };        var socket = channel.open(handler);        socket.onopen = onOpened;        socket.onmessage = onMessage;    }    initialize = function() {        openChannel();         var msg = document.getElementById('content');      msg.innerHTML = 'openChannel';    }    setTimeout(initialize, 100);</script></body></html>