<html><head>       <script type="text/javascript" src="/_ah/channel/jsapi"></script>       <style>body {background-image:url("map.jpg");background-repeat:no-repeat;background-size:1400px 700px;} #greenpermit{position:absolute;top: 430px;left: 72px;width: 490px;height: 67px;border:4px solid green;}#orangepermit{position:absolute;top: 323px;left: 74px;width: 600px;height: 62px;border:4px solid orange;}</style></head><body><div id='content'>  log</div><div id='time'>  12:30PM</div><div id="greenpermit"> </div><div id="orangepermit"> </div><div style="background-color:green; width:23px; height:39px; position: absolute; top: 430px; left: 415px;" id='1'></div><div style="background-color:green; width:23px; height:33px; position: absolute; top: 325px; left: 150px;" id='2'></div><div style="background-color:green; width:23px; height:33px; position: absolute; top: 357px; left: 174px;" id='3'></div><div style="background-color:green; width:23px; height:37px; position: absolute; top: 467px; left: 440px;" id='4'></div><script type='text/javascript'>    onMessage = function(m) {		newSpots = JSON.parse(m.data);				for(var i in newSpots){			var field = document.getElementById(i);			if(newSpots[i] == '1'){				field.style.backgroundColor='red';			}else{				field.style.backgroundColor='green';			}		}	var currentdate = new Date();      var dateText = document.getElementById('time');      dateText.innerHTML = currentdate.getHours() + ":" + currentdate.getMinutes();    }        updateDisplay = function(){      var msg = document.getElementById('content');      msg.innerHTML = String(m.data);      var currentdate = new Date();      var dateText = document.getElementById('time');      dateText.innerHTML = currentdate.getHours() + ":" + currentdate.getMinutes();    }    onOpened = function() {      var msg = document.getElementById('content');      msg.innerHTML = 'onOpened';      };    openChannel = function() {      var msg = document.getElementById('content');      msg.innerHTML = 'openChannel';        var token = '{{ token }}';        var channel = new goog.appengine.Channel(token);        var handler = {          'onopen': onOpened,          'onmessage': onMessage,          'onerror': function() {var msg = document.getElementById('content');            msg.style.background = "red";            msg.innerHTML = "onError";},          'onclose': function() {            var msg = document.getElementById('content');            msg.style.background = "green";            msg.innerHTML = "onclose";        }        };        var socket = channel.open(handler);        socket.onopen = onOpened;        socket.onmessage = onMessage;    }    initialize = function() {        openChannel();         var msg = document.getElementById('content');      msg.innerHTML = 'openChannel';    }    setTimeout(initialize, 100);</script></body></html>